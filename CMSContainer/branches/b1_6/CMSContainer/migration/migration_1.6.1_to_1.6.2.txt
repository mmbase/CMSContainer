Migration document:

From version: 1.6.1
To version: 1.6.2


Name: Upgrade MMBase in customer project / implementation
Goal: Upgrade MMBase
Type: do it yourself
--- Start script ---
In project.properties
mmbase.version=1.8.7-20090803

SQL:
ALTER TABLE mm_email DROP COLUMN bodyurl;
ALTER TABLE live_email DROP COLUMN bodyurl;
--- End script ---
*
*
*


Name: Add templates.bundle = false to mmbase-email-section in project.xml
Goal: Prevent mmbase-email from packaging.
Type: do it yourself
--- Start script ---
Add:
<mmbase.templates.bundle>false</mmbase.templates.bundle>

To this section:
<dependency>
         <groupId>mmbase</groupId>
         <artifactId>mmbase-email</artifactId>
         <version>${mmbase.version}</version>
         <type>mmbase-module</type>
         <properties>
            <mmbase.config.bundle>false</mmbase.config.bundle>
            <mmbase.templates.bundle>false</mmbase.templates.bundle>
         </properties>
      </dependency>
--- End script ---
*
*
*


Name: Check for isProduction setting in live and staging context-XMLS
Goal: Keep the TaskModule working
Type: do it yourself
--- Start script ---
The TaskModule does not send emails anymore when production is not true.
Check this setting for both staging and live environments at all production servers.
--- End script ---
*
*
*


Name: Add a intro column and a body column in <prefix>_responseform table
Goal: add intro field and body field in dynamic form & copy description field to intro field & after copying, clean the description field, CMSC-1272
Type:  sql-script
--- Start script ---
ALTER TABLE mm_responseform ADD intro text;
ALTER TABLE mm_responseform ADD body mediumtext;
UPDATE mm_responseform SET intro = description;
UPDATE mm_responseform SET description = NULL;

ALTER TABLE live_responseform ADD intro text;
ALTER TABLE live_responseform ADD body mediumtext;
UPDATE live_responseform SET intro = description;
UPDATE live_responseform SET description = NULL;
--- End script ---
Exceptions/errors/other problems and what to do:
*
*
*

Name: updates to the responseform files, because fields are moved/converted.
Goal: change templates jsp files to use the new intro & body field. Intro is the old 'description' field.
      Related to CMSC-1272. Body is added and should be displayed probably too. 
Type:  manual action in JSPs.
--- Start ---
Steps:
1. update the locations where the "description" field is used, to the "intro" field.
So
   <mm:field name="description">
to 
	<mm:field name="intro"/>
	<mm:field name="body"/>

--- End ---
Exceptions/errors/other problems and what to do:
*
*
*


Name: if insertinline_image.html is overwritten, merge with CMSc version 
Goal: Keep the file updated with the latest CMSc changes
Type: do it yourself
--- Start script ---
Compare the file insertinline_image.html with your project version and merge the new difference in your
project's file, to keep it updated.
--- End script ---
*
*
*

